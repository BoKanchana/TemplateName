name: PR Slash Command Trigger

on:
  issue_comment:
    types: [created]

jobs:
  test-slash-command:
    if: |
      github.event.issue.pull_request &&
      startsWith(github.event.comment.body, '/run-e2e')
    runs-on: ubuntu-latest
    steps:
      - name: Reply on pull request comment
        uses: actions/github-script@v7
        with:
          script: |
            const prNumber = context.issue.number;
            const commentId = context.payload.comment.id;
            const sender = context.actor;
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: prNumber,
              body: `‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö slash command "/run-e2e" ‡πÇ‡∏î‡∏¢ @${sender}.\n‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç if ‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ô‡πâ‡∏ß (test success)! üëç`
            });